[{"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\index.js":"1","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\redux\\rootReducer.js":"2","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\App\\App.js":"3","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\Carousel\\Carousel.js":"4","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\ProfilePage\\ProfilePage.js":"5","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\Footer\\Footer.js":"6","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\redux\\initialState.js":"7","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\hooks\\useCarousel.js":"8","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\utils\\urls.js":"9","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\index.js":"10","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\LandingPage\\LandingPage.js":"11","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\LoginPage\\LoginPage.js":"12","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\Navbar\\Navbar.js":"13","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\RegistrationPage\\RegistrationPage.js":"14","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\utils\\errors.js":"15","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\CarouselTitle\\CarouselTitle.js":"16","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\NotFoundPage\\NotFoundPage.js":"17","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\ProtectedRoute\\ProtectedRoute.js":"18","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\services\\apiClient.js":"19","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\LoginForm\\LoginForm.js":"20","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\redux\\store.js":"21","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\RegistrationForm\\RegistrationForm.js":"22","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\Layout\\Layout.js":"23","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\utils\\validation.js":"24","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\ProfilePage\\ProfileData.js":"25","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\ProfilePage\\UpdateUserData.js":"26","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\redux\\auth.js":"27"},{"size":376,"mtime":1610108863029,"results":"28","hashOfConfig":"29"},{"size":206,"mtime":1610108794541,"results":"30","hashOfConfig":"29"},{"size":729,"mtime":1611183907850,"results":"31","hashOfConfig":"29"},{"size":2440,"mtime":1611162123843,"results":"32","hashOfConfig":"29"},{"size":2955,"mtime":1611259220614,"results":"33","hashOfConfig":"29"},{"size":444,"mtime":1611183720340,"results":"34","hashOfConfig":"29"},{"size":115,"mtime":1611440395961,"results":"35","hashOfConfig":"29"},{"size":589,"mtime":1609680731953,"results":"36","hashOfConfig":"29"},{"size":1507,"mtime":1610239129868,"results":"37","hashOfConfig":"29"},{"size":911,"mtime":1611077645835,"results":"38","hashOfConfig":"29"},{"size":3546,"mtime":1611185329167,"results":"39","hashOfConfig":"29"},{"size":1125,"mtime":1609684595084,"results":"40","hashOfConfig":"29"},{"size":6652,"mtime":1611248669060,"results":"41","hashOfConfig":"29"},{"size":1114,"mtime":1610289289102,"results":"42","hashOfConfig":"29"},{"size":2012,"mtime":1610240748599,"results":"43","hashOfConfig":"29"},{"size":3496,"mtime":1611185289230,"results":"44","hashOfConfig":"29"},{"size":97,"mtime":1609684194156,"results":"45","hashOfConfig":"29"},{"size":1470,"mtime":1610237790829,"results":"46","hashOfConfig":"29"},{"size":2140,"mtime":1610239713978,"results":"47","hashOfConfig":"29"},{"size":4871,"mtime":1611264473421,"results":"48","hashOfConfig":"29"},{"size":601,"mtime":1610125365333,"results":"49","hashOfConfig":"29"},{"size":7157,"mtime":1611445829759,"results":"50","hashOfConfig":"29"},{"size":1417,"mtime":1611184078752,"results":"51","hashOfConfig":"29"},{"size":753,"mtime":1609685430872,"results":"52","hashOfConfig":"29"},{"size":1799,"mtime":1611215683523,"results":"53","hashOfConfig":"29"},{"size":8795,"mtime":1611448356589,"results":"54","hashOfConfig":"29"},{"size":6974,"mtime":1611447895428,"results":"55","hashOfConfig":"29"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},"1i5ial",{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"61"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"79"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"97"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102","usedDeprecatedRules":"58"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"86"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"111","messages":"112","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"113","messages":"114","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"115"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\index.js",[],["118","119"],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\redux\\rootReducer.js",[],["120","121"],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\App\\App.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\Carousel\\Carousel.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\ProfilePage\\ProfilePage.js",["122"],"import React, { useState } from \"react\"\r\nimport { connect } from \"react-redux\"\r\nimport ProfileData from \"./ProfileData\"\r\nimport UpdateUserData from \"./UpdateUserData\"\r\nimport {\r\n  EuiAvatar,\r\n  EuiHorizontalRule,\r\n  EuiIcon,\r\n  EuiPage,\r\n  EuiPageBody,\r\n  EuiPageContent,\r\n  EuiPageContentBody,\r\n  EuiPageHeader,\r\n  EuiButton,\r\n  EuiFlexItem,\r\n  EuiFlexGroup,\r\n  EuiPageHeaderSection,\r\n  EuiTitle,\r\n  EuiText\r\n} from \"@elastic/eui\"\r\nimport moment from \"moment\"\r\nimport styled from \"styled-components\"\r\nconst StyledEuiPage = styled(EuiPage)`\r\n  flex: 1;\r\n`\r\nconst StyledEuiPageHeader = styled(EuiPageHeader)`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 2rem;\r\n  & h1 {\r\n    font-size: 3.5rem;\r\n  }\r\n`\r\nconst StyledEuiPageContentBody = styled(EuiPageContentBody)`\r\n  visibility: ${(props) => (props.clicked ? \"hidden\" : \"visible\")};\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  & h2 {\r\n    margin-bottom: 1rem;\r\n  }\r\n`\r\nconst StyledEuiFlexGroup = styled(EuiFlexGroup)`\r\n  margin:1px 7px 10px 1px;\r\n`\r\n\r\nfunction ProfilePage({ user }) {\r\n\r\n  return (\r\n    <StyledEuiPage>\r\n      <EuiPageBody component=\"section\">\r\n        <StyledEuiPageHeader>\r\n          <EuiPageHeaderSection>\r\n            <EuiTitle size=\"l\">\r\n              <h1>Profile</h1>\r\n            </EuiTitle>\r\n          </EuiPageHeaderSection>\r\n        </StyledEuiPageHeader>\r\n\r\n        <StyledEuiFlexGroup wrap gutterSize=\"s\" alignItems=\"center\" justifyContent=\"center\">\r\n          <EuiFlexItem grow={false}>\r\n            <EuiButton color=\"text\" onClick={() => { }}>\r\n              Update Email\r\n                  </EuiButton>\r\n          </EuiFlexItem>\r\n\r\n          <EuiFlexItem grow={false}>\r\n            <EuiButton color=\"text\" onClick={() => { }}>\r\n              Update Password\r\n                </EuiButton>\r\n          </EuiFlexItem>\r\n\r\n          <UpdateUserData />\r\n          \r\n        </StyledEuiFlexGroup>\r\n        <EuiPageContent verticalPosition=\"center\" horizontalPosition=\"center\">\r\n          <StyledEuiPageContentBody>\r\n            <EuiAvatar\r\n              size=\"xl\"\r\n              name={user.profile.first_name || user.username || \"Anonymous\"}\r\n              initialsLength={2}\r\n              color=\"#abd544\"\r\n              imageUrl={user.profile.image}\r\n            />\r\n            <EuiTitle size=\"l\">\r\n              <h2>@{user.username}</h2>\r\n            </EuiTitle>\r\n            <EuiText>\r\n              <p>\r\n                <EuiIcon type=\"email\" /> {user.email}\r\n              </p>\r\n\r\n              <p>\r\n                <EuiIcon type=\"clock\" /> MEMBER SINCE {moment(user.created_at).format(\"DD-MM-YYYY\")}\r\n              </p>\r\n\r\n              <EuiHorizontalRule />\r\n\r\n              <ProfileData />\r\n            </EuiText>\r\n          </StyledEuiPageContentBody>\r\n        </EuiPageContent>\r\n      </EuiPageBody>\r\n    </StyledEuiPage>\r\n  )\r\n}\r\nexport default connect((state) => ({ user: state.auth.user }))(ProfilePage);","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\Footer\\Footer.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\redux\\initialState.js",["123"],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\hooks\\useCarousel.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\utils\\urls.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\index.js",[],["124","125"],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\LandingPage\\LandingPage.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\LoginPage\\LoginPage.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\Navbar\\Navbar.js",[],["126","127"],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\RegistrationPage\\RegistrationPage.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\utils\\errors.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\CarouselTitle\\CarouselTitle.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\NotFoundPage\\NotFoundPage.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\ProtectedRoute\\ProtectedRoute.js",[],["128","129"],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\services\\apiClient.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\LoginForm\\LoginForm.js",["130"],"import React from \"react\"\r\nimport { connect } from \"react-redux\"\r\nimport { Actions as authActions, REQUEST_LOGIN_SUCCESS, FETCHING_USER_FROM_TOKEN_SUCCESS  } from \"../../redux/auth\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport {\r\n  EuiButton,\r\n  EuiFieldText,\r\n  EuiForm,\r\n  EuiFormRow,\r\n  EuiFieldPassword,\r\n  EuiSpacer\r\n} from \"@elastic/eui\"\r\nimport { Link } from \"react-router-dom\"\r\nimport validation from \"../../utils/validation\"\r\nimport styled from \"styled-components\"\r\nconst LoginFormWrapper = styled.div`\r\n  padding: 2rem;\r\n`\r\nconst NeedAccountLink = styled.span`\r\n  font-size: 0.8rem;\r\n`\r\nfunction LoginForm({ user, authError, isLoading, isAuthenticated, requestUserLogin }) {\r\n  const [hasSubmitted, setHasSubmitted] = React.useState(false)\r\n  const [form, setForm] = React.useState({\r\n    email: \"\",\r\n    password: \"\"\r\n  })\r\n  const navigate = useNavigate()\r\n  const [errors, setErrors] = React.useState({})\r\n  const validateInput = (label, value) => {\r\n    // grab validation function and run it on input if it exists\r\n    // if it doesn't exists, just assume the input is valid\r\n    const isValid = validation?.[label] ? validation?.[label]?.(value) : true\r\n    // set an error if the validation function did NOT return true\r\n    setErrors((errors) => ({ ...errors, [label]: !isValid }))\r\n  }\r\n  const handleInputChange = (label, value) => {\r\n    validateInput(label, value)\r\n    setForm((form) => ({ ...form, [label]: value }))\r\n  }\r\n\r\n  // if the user is already authenticated, redirect them to the \"/profile\" page\r\n  React.useEffect(() => {\r\n    if (user?.email && isAuthenticated) {\r\n      navigate(\"/profile\")\r\n    }\r\n  }, [user, navigate, isAuthenticated])\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n    // validate inputs before submitting\r\n    Object.keys(form).forEach((label) => validateInput(label, form[label]))\r\n    // if any input hasn't been entered in, return early\r\n    if (!Object.values(form).every((value) => Boolean(value))) {\r\n      setErrors((errors) => ({ ...errors, form: `You must fill out all fields.` }))\r\n      return\r\n    }\r\n    await requestUserLogin({ email: form.email, password: form.password })\r\n\r\n    setHasSubmitted(true)\r\n    const action = await requestUserLogin({ email: form.email, password: form.password })\r\n    // reset the password form state if the login attempt is not successful\r\n    if (action?.type !== FETCHING_USER_FROM_TOKEN_SUCCESS) {\r\n      setForm(form => ({ ...form, password: \"\" }))\r\n    }\r\n  }\r\n\r\n  const getFormErrors = () => {\r\n    const formErrors = []\r\n    if (authError && hasSubmitted) {\r\n      formErrors.push(`Invalid credentials. Please try again.`)\r\n    }\r\n    if (errors.form) {\r\n      formErrors.push(errors.form)\r\n    }\r\n    return formErrors\r\n  }\r\n\r\n  return (\r\n    <LoginFormWrapper>\r\n      <EuiForm\r\n        component=\"form\"\r\n        onSubmit={handleSubmit}\r\n        isInvalid={Boolean(getFormErrors().length)}\r\n        error={getFormErrors()}\r\n      >\r\n        <EuiFormRow\r\n          label=\"Email\"\r\n          helpText=\"Enter the email associated with your account.\"\r\n          isInvalid={Boolean(errors.email)}\r\n          error={`Please enter a valid email.`}\r\n        >\r\n          <EuiFieldText\r\n            icon=\"email\"\r\n            placeholder=\"user@gmail.com\"\r\n            value={form.email}\r\n            onChange={(e) => handleInputChange(\"email\", e.target.value)}\r\n            aria-label=\"Enter the email associated with your account.\"\r\n            isInvalid={Boolean(errors.email)}\r\n          />\r\n        </EuiFormRow>\r\n        <EuiFormRow\r\n          label=\"Password\"\r\n          helpText=\"Enter your password.\"\r\n          isInvalid={Boolean(errors.password)}\r\n          error={`Password must be at least 7 characters.`}\r\n        >\r\n          <EuiFieldPassword\r\n            placeholder=\"••••••••••••\"\r\n            value={form.password}\r\n            onChange={(e) => handleInputChange(\"password\", e.target.value)}\r\n            type=\"dual\"\r\n            aria-label=\"Enter your password.\"\r\n            isInvalid={Boolean(errors.password)}\r\n          />\r\n        </EuiFormRow>\r\n        <EuiSpacer />\r\n        <EuiButton type=\"submit\" fill isLoading={isLoading}>\r\n          Submit\r\n          </EuiButton>\r\n      </EuiForm>\r\n      <EuiSpacer size=\"xl\" />\r\n      <NeedAccountLink>\r\n        Need an account? Sign up <Link to=\"/registration\">here</Link>.\r\n      </NeedAccountLink>\r\n    </LoginFormWrapper>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  authError: state.auth.error,\r\n  isLoading: state.auth.isLoading,\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n  user: state.auth.user,\r\n})\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  requestUserLogin: ({ email, password }) => dispatch(authActions.requestUserLogin({ email, password }))\r\n})\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm)\r\n","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\redux\\store.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\RegistrationForm\\RegistrationForm.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\Layout\\Layout.js",[],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\utils\\validation.js",["131"],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\ProfilePage\\ProfileData.js",["132"],"C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\components\\ProfilePage\\UpdateUserData.js",["133","134"],"import { connect } from \"react-redux\";\r\nimport '@elastic/eui/dist/eui_theme_light.css';\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { Actions as authActions, FETCHING_USER_FROM_TOKEN_SUCCESS } from \"../../redux/auth\";\r\nimport {\r\n  EuiButton,\r\n  EuiCheckbox,\r\n  EuiFieldText,\r\n  EuiForm,\r\n  EuiFormRow,\r\n  EuiPopover,\r\n  EuiSpacer\r\n} from \"@elastic/eui\";\r\nimport validation from \"../../utils/validation\";\r\n// import { htmlIdGenerator } from \"@elastic/eui/lib/services\";\r\n// import styled from \"styled-components\";\r\nimport { extractErrorMessages } from \"../../utils/errors\";\r\n\r\n\r\nfunction UpdateUserData({ user, authError, isUpdating, isAuthenticated, UpdateUserProfileData }) {\r\n  const [isPopoverOpen, setIsPopoverOpen] = useState(false)\r\n  const [form, setForm] = React.useState({\r\n    first_name: \"\",\r\n    last_name: \"\",\r\n    phone_number: \"\",\r\n    licence_number: \"\",\r\n    licence_category: \"\",\r\n    licence_expire_date: \"\"\r\n  })\r\n\r\n  let pat = /(\\d{3})-(\\d{3})-(\\d{4})/\r\n  const [errors, setErrors] = React.useState({})\r\n  const navigate = useNavigate()\r\n  const [hasSubmitted, setHasSubmitted] = React.useState(false)\r\n  const authErrorList = extractErrorMessages(authError)\r\n  // if the user is already authenticated, redirect them to the \"/profile\" page\r\n\r\n\r\n\r\n  const validateInput = (label, value) => {\r\n    // grab validation function and run it on input if it exists\r\n    // if it doesn't exists, just assume the input is valid\r\n    const isValid = validation?.[label] ? validation?.[label]?.(value) : true\r\n    // set an error if the validation function did NOT return true\r\n    setErrors((errors) => ({ ...errors, [label]: !isValid }))\r\n  };\r\n\r\n  const handleInputChange = (label, value) => {\r\n    validateInput(label, value)\r\n    setForm((form) => ({ ...form, [label]: value }))\r\n  };\r\n\r\n\r\n\r\n  const handlePhoneChange = (label, value) => {\r\n    setErrors((errors) => ({\r\n      ...errors,\r\n      phone_number: !pat.exec(value) || value.length > 12 ? `Phone number should be written like 69x-xxx-xxxx.` : null\r\n    }));\r\n    handleInputChange(label, value)\r\n  }\r\n\r\n\r\n  const handleDateChange = (label, value) => {\r\n    setErrors((errors) => ({\r\n      ...errors,\r\n      licence_expire_date: !Date.parse(value) || Date(value) < Date.now() ? `Date should be after today and written like YYYY-MM-DD.` : null\r\n    }))\r\n    handleInputChange(label, value)\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n    // validate inputs before submitting\r\n    Object.keys(form).forEach((label) => validateInput(label, form[label]))\r\n    // if any input hasn't been entered in, return early\r\n    if (!Object.values(form).every((value) => Boolean(value))) {\r\n      setErrors((errors) => ({ ...errors, form: `You must fill out all fields.` }))\r\n      return\r\n    }\r\n\r\n    if (!pat.exec(form.phone_number) || form.phone_number.length > 12) {\r\n      setErrors((errors) => ({ ...errors, form: `Phone number should be written like 69x-xxx-xxxx.` }))\r\n      return\r\n    }\r\n\r\n    if (!Date.parse(form.licence_expire_date) || Date(form.licence_expire_date) < Date.now()) {\r\n      setErrors((errors) => ({ ...errors, form: `Date should be after today and written like YYYY-MM-DD.` }))\r\n      return\r\n    }\r\n\r\n    setHasSubmitted(true)\r\n\r\n    const actionUp = await UpdateUserProfileData({\r\n      first_name: form.first_name,\r\n      last_name: form.last_name,\r\n      phone_number: form.phone_number,\r\n      licence_number: form.licence_number,\r\n      licence_category: form.licence_category,\r\n      licence_expire_date: form.licence_expire_date\r\n    }\r\n    )\r\n    if (actionUp.success) {\r\n      navigate(\"/profile\")\r\n    }\r\n\r\n  }\r\n\r\n  const getFormErrors = () => {\r\n    const formErrors = []\r\n    if (errors.form) {\r\n      formErrors.push(errors.form)\r\n    }\r\n    if (hasSubmitted && authErrorList.length) {\r\n      return formErrors.concat(authErrorList)\r\n    }\r\n    return formErrors\r\n  }\r\n\r\n  const onButtonClick = () => {\r\n    setIsPopoverOpen(!isPopoverOpen)\r\n  }\r\n\r\n  const closePopover = () => {\r\n    setIsPopoverOpen(false)\r\n  }\r\n\r\n\r\n  const button = (\r\n    <EuiButton style={{ backgroundColor: \"#abd544\", borderColor: \"#abd544\" }}\r\n      iconSide=\"right\"\r\n      fill\r\n      iconType=\"arrowDown\"\r\n      onClick={onButtonClick}>\r\n      Update Profile Info\r\n    </EuiButton>\r\n  );\r\n\r\n\r\n  const UpdateUserDataForm = (<EuiForm\r\n    component=\"form\"\r\n    onSubmit={handleSubmit}\r\n    isInvalid={Boolean(getFormErrors().length)}\r\n    error={getFormErrors()}\r\n  >\r\n    <EuiFormRow\r\n      label=\"First name\"\r\n      helpText=\"Enter your first name.\"\r\n      isInvalid={Boolean(errors.first_name)}\r\n      error={`Please enter your name.`}\r\n    >\r\n      <EuiFieldText\r\n        icon=\"user\"\r\n        placeholder={user.profile.first_name ? user.profile.first_name : \" First name not specified\"}\r\n        value={form.first_name}\r\n        onChange={(e) => handleInputChange(\"first_name\", e.target.value)}\r\n        aria-label=\"Enter your first name.\"\r\n        isInvalid={Boolean(errors.first_name)}\r\n      />\r\n    </EuiFormRow>\r\n    <EuiFormRow\r\n      label=\"Last name\"\r\n      helpText=\"Enter your last name.\"\r\n      isInvalid={Boolean(errors.last_name)}\r\n      error={`Please enter your last name.`}\r\n    >\r\n      <EuiFieldText\r\n        icon=\"user\"\r\n        placeholder={user.profile.last_name ? user.profile.last_name : \" Last name not specified\"}\r\n        value={form.last_name}\r\n        onChange={(e) => handleInputChange(\"last_name\", e.target.value)}\r\n        aria-label=\"Enter your last name.\"\r\n        isInvalid={Boolean(errors.last_name)}\r\n      />\r\n    </EuiFormRow>\r\n    <EuiFormRow\r\n      label=\"Phone number\"\r\n      helpText=\"Enter your phone number.\"\r\n      isInvalid={Boolean(errors.phone_number)}\r\n      error={`Phone number should be written like 69x-xxx-xxxx.`}\r\n    >\r\n      <EuiFieldText\r\n        placeholder={user.profile.phone_number ? user.profile.phone_number : \" No phone number added\"}\r\n        value={form.phone_number}\r\n        onChange={(e) => handlePhoneChange(\"phone_number\", e.target.value)}\r\n        aria-label=\"Phone number should be written like 69x-xxx-xxxx.\"\r\n        isInvalid={Boolean(errors.phone_number)}\r\n      />\r\n    </EuiFormRow>\r\n    <EuiFormRow\r\n      label=\"Licence number\"\r\n      helpText=\"Confirm your licencenumber.\"\r\n      isInvalid={Boolean(errors.licence_number)}\r\n      error={`Confirm your licence number.`}\r\n    >\r\n      <EuiFieldText\r\n        placeholder={user.profile.licence_number ?\r\n          user.profile.licence_number : \" No licence number added\"}\r\n        value={form.licence_number}\r\n        onChange={(e) => handleInputChange(\"licence_number\", e.target.value)}\r\n        aria-label=\"Confirm your licence number.\"\r\n        isInvalid={Boolean(errors.licence_number)}\r\n      />\r\n    </EuiFormRow>\r\n    <EuiFormRow\r\n      label=\"Licence Category\"\r\n      helpText=\"Enter your licence category.\"\r\n      isInvalid={Boolean(errors.licence_category)}\r\n      error={`Enter your licence_category.`}\r\n    >\r\n      <EuiFieldText\r\n        placeholder={user.profile.licence_category ?\r\n          user.profile.licence_category : \" No licence category added\"}\r\n        value={form.licence_category}\r\n        onChange={(e) => handleInputChange(\"licence_category\", e.target.value)}\r\n        aria-label=\"Enter your licence_category.\"\r\n        isInvalid={Boolean(errors.licence_categoryr)}\r\n      />\r\n    </EuiFormRow>\r\n    <EuiFormRow\r\n      label=\"Licence Expire Date\"\r\n      helpText=\"Confirm your licence expire date.\"\r\n      isInvalid={Boolean(errors.licence_expire_date)}\r\n      error={`Please enter your licence expire date.`}\r\n    >\r\n      <EuiFieldText\r\n        placeholder={user.profile.licence_expire_date ?\r\n          user.profile.licence_expire_date : \" No licence expire date added\"}\r\n        value={form.licence_expire_date}\r\n        onChange={(e) => handleDateChange(\"licence_expire_date\", e.target.value)}\r\n        aria-label=\"Please enter your licence expire date.\"\r\n        isInvalid={Boolean(errors.licence_expire_date)}\r\n      />\r\n    </EuiFormRow>\r\n    <EuiSpacer />\r\n\r\n    <EuiButton type=\"submit\" isLoading={isUpdating} onClick={closePopover} fill>\r\n      Update Profile\r\n    </EuiButton>\r\n  </EuiForm>);\r\n\r\n  return (\r\n    <div>\r\n      <EuiPopover style={{ width: '100%' }}\r\n        id=\"formPopover\"\r\n        ownFocus\r\n        button={button}\r\n        isOpen={isPopoverOpen}\r\n        closePopover={closePopover}>\r\n        {UpdateUserDataForm}\r\n      </EuiPopover>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default connect(\r\n  (state) => ({\r\n    user: state.auth.user,\r\n    authError: state.auth.error,\r\n    isAuthenticated: state.auth.isAuthenticated,\r\n    isUpdating: state.auth.isUpdating\r\n  }),\r\n  {\r\n    UpdateUserProfileData: authActions.UpdateOwnProfile\r\n  }\r\n)(UpdateUserData)\r\n","C:\\Users\\Nikitas\\OneDrive\\Desktop\\SoHereWeAreFrontEnd\\src\\redux\\auth.js",[],{"ruleId":"135","replacedBy":"136"},{"ruleId":"137","replacedBy":"138"},{"ruleId":"135","replacedBy":"139"},{"ruleId":"137","replacedBy":"140"},{"ruleId":"141","severity":1,"message":"142","line":1,"column":17,"nodeType":"143","messageId":"144","endLine":1,"endColumn":25},{"ruleId":"145","severity":1,"message":"146","line":1,"column":1,"nodeType":"147","endLine":8,"endColumn":2},{"ruleId":"135","replacedBy":"148"},{"ruleId":"137","replacedBy":"149"},{"ruleId":"135","replacedBy":"150"},{"ruleId":"137","replacedBy":"151"},{"ruleId":"135","replacedBy":"152"},{"ruleId":"137","replacedBy":"153"},{"ruleId":"141","severity":1,"message":"154","line":3,"column":34,"nodeType":"143","messageId":"144","endLine":3,"endColumn":55},{"ruleId":"145","severity":1,"message":"146","line":25,"column":3,"nodeType":"147","endLine":30,"endColumn":4},{"ruleId":"141","severity":1,"message":"155","line":4,"column":5,"nodeType":"143","messageId":"144","endLine":4,"endColumn":22},{"ruleId":"141","severity":1,"message":"156","line":5,"column":34,"nodeType":"143","messageId":"144","endLine":5,"endColumn":66},{"ruleId":"141","severity":1,"message":"157","line":8,"column":3,"nodeType":"143","messageId":"144","endLine":8,"endColumn":14},"no-native-reassign",["158"],"no-negated-in-lhs",["159"],["158"],["159"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration",["158"],["159"],["158"],["159"],["158"],["159"],"'REQUEST_LOGIN_SUCCESS' is defined but never used.","'EuiHorizontalRule' is defined but never used.","'FETCHING_USER_FROM_TOKEN_SUCCESS' is defined but never used.","'EuiCheckbox' is defined but never used.","no-global-assign","no-unsafe-negation"]